m = { "a": "foo", "b": "bar" }
r = map m as k, v { v }

# This rule will FAIL because r contains "foo" and "baz", but we check for "baz"
main = rule { length(r) == 2 and "bar" in r }